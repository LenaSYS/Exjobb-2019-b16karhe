<!doctype html>
<html ng-app="cartApp"> <!-- Starting AngularJS -->
    <head>
        <link rel="stylesheet" type="text/css" href="../style.css">
        <title>First ANGULAR</title>
        <script src="angular.js"></script>
        <script src="../model.js"></script>
        <script src="ctrl.js"></script>
    </head>
    <body>
        <h1> AngularJS shop </h1>
        <div id="cartApp" ng-controller="cartCtrl"> <!-- Link to the controller. -->
            <!-- {{products}} to see products inside cart-->
            <!-- {{extaProducts}} to see products outside of the cart-->
            <ol>
                <h3>PRIS: {{ getTotal() }} kr <label ng-if="newProduct">+ {{newProduct.price}}</label></h3>
                <li ng-repeat="product in products| filter:{selectedQuantity: ''}"> <!-- Listing of items inside products as product. The data is retrived from the model through the controller. --> 
                    {{product.stockCode}} - 
                    "{{product.description}}" - 
                    {{product.price}} kr/st
                    <button ng-disabled="product.selectedQuantity == 1" ng-click="product.selectedQuantity = product.selectedQuantity - 1">[ - ]</button>
                    {{ product.selectedQuantity }}
                    <button ng-disabled="product.selectedQuantity == product.quantity" ng-click="product.selectedQuantity = product.selectedQuantity + 1">[ + ]</button>
                    <button ng-click="product.selectedQuantity = null">[ X ]</button>
                    {{ product.selectedQuantity * product.price }} kr
                </li>
                {{newProduct.stockCode}} -
                {{newProduct.description}} 
            </ol>
            <form id="outerFlex" ng-submit="newProduct = false">
                <h2>Liknande produkter:</h2>
                <div class="innerFlex" ng-repeat="product in products | filter:{selectedQuantity:null} | limitTo:8"> <!-- Listing 5 prodcuts outside of the cart by limiting the itteration through "limitTo" -->
                    <label class="radioLabel">
                    <input type="radio" ng-click="$parent.id = products.indexOf(product)" ng-value="product"  ng-model="$parent.newProduct">
                    <div>
                        {{ product.stockCode }} 
                        "{{ product.description }}" 
                        {{ product.price }} kr/st
                    </div>
                    </label>
                </div>
                <div id="addButtonDiv">
                    <button id="addButton" ng-disabled="newProduct == false" ng-click="products[id].selectedQuantity = 1">
                        Add product
                    </button>
                </div>
            </form>
        </div> 
    </body>
</html>