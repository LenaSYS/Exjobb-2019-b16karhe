<!doctype html>
<html ng-app="cartApp"> <!-- Starting AngularJS -->
    <head>
        <link rel="stylesheet" type="text/css" href="../style.css">
        <title>First ANGULAR</title>
        <script src="angular.js"></script>
        <script src="../model.js"></script>
        <script src="ctrl.js"></script>
    </head>
    <body>
        <h1> AngularJS shop </h1>
        <div ng-controller="cartCtrl"> <!-- Link to the controller. -->
            <!-- {{products}} to see products inside cart-->
            <!-- {{extaProducts}} to see products outside of the cart-->
            <ol>
                <h3>Kundvagn:</h3>
                <li ng-repeat="product in products | filter:{selected:true}"> <!-- Listing of items inside products as product. The data is retrived from the model through the controller. --> 
                    {{product.stockCode}} - 
                    "{{product.description}}" -  
                    {{product.price}}
                    <button ng-disabled="product.selectedQuantity == 1" ng-click="product.selectedQuantity = product.selectedQuantity - 1">[ - ]</button>
                    {{ product.selectedQuantity }}
                    <button ng-disabled="product.selectedQuantity == product.quantity" ng-click="product.selectedQuantity = product.selectedQuantity + 1">[ + ]</button>
                    <button ng-click="product.selected = false;">[ X ]</button>
                </li>
                {{newProduct.stockCode}}   
                {{newProduct.description}} -  
                {{newProduct.price}}  
            </ol>
            <form ng-submit="newProduct = false">
                <h2>Liknande produkter:</h2>
                <div ng-repeat="product in products | filter:{selected:false}">
                    <input type="radio" ng-click="$parent.id = products.indexOf(product)" ng-value="product"  ng-model="$parent.newProduct">
                    <label>{{product.stockCode}} {{product.description}} {{product.price}}</label>
                </div>
                <button ng-disabled="newProduct == false" ng-click="products[id].selectedQuantity = 1; products[id].selected = true; ">Add product</button>
            </form>
        </div> 
    </body>
</html>